"use strict";$(function(){var t,o,n,i,e,c,d=(t=new RegExp("(^|&)"+"id"+"=([^&]*)(&|$)","i"),null!=(o=window.location.search.substr(1).match(t))?unescape(o[2]):null),a=JSON.parse($.cookie("token")).token;n=$(".pic"),i=$(".title"),e=$(".price"),c=$(".cartBtn"),$.get("http://47.104.244.134:8080/goodsbyid.do",{id:d}).done(function(t){""===t.picurl&&(t.picurl="//img.alicdn.com/bao/uploaded/i8/TB1EGoINSzqK1RjSZPxduM4tVXa_111820.jpg"),n.html('<img src="'+t.picurl+'">'),i.html(""+t.name),e.html("￥"+t.price),c.html('<a href="cartList.html?id='+t.id+'">加入购物车</a>')}),function(){var t=$(".num"),o=/^[0-9]*$/;t.val(1);var n=1;$(".minus").click(function(){--n<=1&&(n=1),t.val(n),$.get("http://47.104.244.134:8080/cartlist.do",{token:a}).done(function(t){for(var o=0;o<t.length;o++)if(t[o].goods.id==d){var n=t[o].gid,i=t[o].cid;$.get("http://47.104.244.134:8080/cartupdate.do",{id:i,num:e,gid:n,token:a}).done(function(t){console.log(t)})}})}),$(".plus").click(function(){n++,t.val(n),$.get("http://47.104.244.134:8080/cartlist.do",{token:a}).done(function(t){for(var o=0;o<t.length;o++)if(t[o].goods.id==d){var n=t[o].gid,i=t[o].cid;$.get("http://47.104.244.134:8080/cartupdate.do",{id:i,num:e,gid:n,token:a}).done(function(t){console.log(t)})}})});var e=t.val(n);t.change(function(){o.test(e)?(t.val(e),console.log(e)):t.val(1),$.get("http://47.104.244.134:8080/cartsave.do",{gid:d,token:a}).done(function(t){}),$.get("http://47.104.244.134:8080/cartlist.do",{token:a}).done(function(t){for(var o=0;o<t.length;o++)if(t[o].goods.id==d){var n=t[o].gid,i=t[o].cid;$.get("http://47.104.244.134:8080/cartupdate.do",{id:i,num:e,gid:n,token:a}).done(function(t){console.log(t)})}})}),$(".cartBtn").click(function(){$.get("http://47.104.244.134:8080/cartsave.do",{gid:d,token:a}).done(function(t){console.log(t)})})}()});